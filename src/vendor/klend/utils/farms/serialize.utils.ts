import { FarmStateJSON, FarmStateRaw } from "../../types";

export function farmRawToDto(farmRaw: FarmStateRaw): FarmStateJSON {
  return {
    farmAdmin: farmRaw.farmAdmin.toBase58(),
    globalConfig: farmRaw.globalConfig.toBase58(),
    token: {
      mint: farmRaw.token.mint.toBase58(),
      decimals: farmRaw.token.decimals.toString(),
      tokenProgram: farmRaw.token.tokenProgram.toBase58(),
      padding: farmRaw.token.padding.map((p) => p.toString()),
    },
    rewardInfos: farmRaw.rewardInfos.map((item) => ({
      token: {
        mint: item.token.mint.toBase58(),
        decimals: item.token.decimals.toString(),
        tokenProgram: item.token.tokenProgram.toBase58(),
        padding: item.token.padding.map((p) => p.toString()),
      },
      rewardsVault: item.rewardsVault.toBase58(),
      rewardsAvailable: item.rewardsAvailable.toString(),
      rewardScheduleCurve: {
        points: item.rewardScheduleCurve.points.map((p) => ({
          tsStart: p.tsStart.toString(),
          rewardPerTimeUnit: p.rewardPerTimeUnit.toString(),
        })),
      },
      minClaimDurationSeconds: item.minClaimDurationSeconds.toString(),
      lastIssuanceTs: item.lastIssuanceTs.toString(),
      rewardsIssuedUnclaimed: item.rewardsIssuedUnclaimed.toString(),
      rewardsIssuedCumulative: item.rewardsIssuedCumulative.toString(),
      rewardPerShareScaled: item.rewardPerShareScaled.toString(),
      placeholder0: item.placeholder0.toString(),
      rewardType: item.rewardType,
      rewardsPerSecondDecimals: item.rewardsPerSecondDecimals,
      padding0: item.padding0,
      padding1: item.padding1.map((p) => p.toString()),
    })),
    numRewardTokens: farmRaw.numRewardTokens.toString(),
    numUsers: farmRaw.numUsers.toString(),
    totalStakedAmount: farmRaw.totalStakedAmount.toString(),
    farmVault: farmRaw.farmVault.toBase58(),
    farmVaultsAuthority: farmRaw.farmVaultsAuthority.toBase58(),
    farmVaultsAuthorityBump: farmRaw.farmVaultsAuthorityBump.toString(),
    delegateAuthority: farmRaw.delegateAuthority.toBase58(),
    timeUnit: farmRaw.timeUnit,
    isFarmFrozen: farmRaw.isFarmFrozen,
    isFarmDelegated: farmRaw.isFarmDelegated,
    padding0: farmRaw.padding0,
    withdrawAuthority: farmRaw.withdrawAuthority.toBase58(),
    depositWarmupPeriod: farmRaw.depositWarmupPeriod,
    withdrawalCooldownPeriod: farmRaw.withdrawalCooldownPeriod,
    totalActiveStakeScaled: farmRaw.totalActiveStakeScaled.toString(),
    totalPendingStakeScaled: farmRaw.totalPendingStakeScaled.toString(),
    totalPendingAmount: farmRaw.totalPendingAmount.toString(),
    slashedAmountCurrent: farmRaw.slashedAmountCurrent.toString(),
    slashedAmountCumulative: farmRaw.slashedAmountCumulative.toString(),
    slashedAmountSpillAddress: farmRaw.slashedAmountSpillAddress.toBase58(),
    lockingMode: farmRaw.lockingMode.toString(),
    lockingStartTimestamp: farmRaw.lockingStartTimestamp.toString(),
    lockingDuration: farmRaw.lockingDuration.toString(),
    lockingEarlyWithdrawalPenaltyBps:
      farmRaw.lockingEarlyWithdrawalPenaltyBps.toString(),
    depositCapAmount: farmRaw.depositCapAmount.toString(),
    scopePrices: farmRaw.scopePrices.toBase58(),
    scopeOraclePriceId: farmRaw.scopeOraclePriceId.toString(),
    scopeOracleMaxAge: farmRaw.scopeOracleMaxAge.toString(),
    pendingFarmAdmin: farmRaw.pendingFarmAdmin.toBase58(),
    strategyId: farmRaw.strategyId.toBase58(),
    delegatedRpsAdmin: farmRaw.delegatedRpsAdmin.toBase58(),
    vaultId: farmRaw.vaultId.toBase58(),
    secondDelegatedAuthority: farmRaw.secondDelegatedAuthority.toBase58(),
    padding: farmRaw.padding.map((item) => item.toString()),
  };
}
